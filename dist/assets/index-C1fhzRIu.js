import{r as o,y,o as O}from"./index-CdbTPMKZ.js";import{u as p}from"./index-B5rDU-0H.js";var E=y[" useId ".trim().toString()]||(()=>{}),v=0;function h(n){const[e,t]=o.useState(E());return p(()=>{t(r=>r??String(v++))},[n]),n||(e?`radix-${e}`:"")}function C(n){const e=o.useRef(n);return o.useEffect(()=>{e.current=n}),o.useMemo(()=>(...t)=>e.current?.(...t),[])}function S(n,e){return o.useReducer((t,r)=>e[t][r]??t,n)}var T=n=>{const{present:e,children:t}=n,r=I(e),a=typeof t=="function"?t({present:r.isPresent}):o.Children.only(t),c=O(r.ref,P(a));return typeof t=="function"||r.isPresent?o.cloneElement(a,{ref:c}):null};T.displayName="Presence";function I(n){const[e,t]=o.useState(),r=o.useRef(null),a=o.useRef(n),c=o.useRef("none"),A=n?"mounted":"unmounted",[N,s]=S(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const i=l(r.current);c.current=N==="mounted"?i:"none"},[N]),p(()=>{const i=r.current,m=a.current;if(m!==n){const f=c.current,u=l(i);n?s("MOUNT"):u==="none"||i?.display==="none"?s("UNMOUNT"):s(m&&f!==u?"ANIMATION_OUT":"UNMOUNT"),a.current=n}},[n,s]),p(()=>{if(e){let i;const m=e.ownerDocument.defaultView??window,d=u=>{const M=l(r.current).includes(CSS.escape(u.animationName));if(u.target===e&&M&&(s("ANIMATION_END"),!a.current)){const R=e.style.animationFillMode;e.style.animationFillMode="forwards",i=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=R)})}},f=u=>{u.target===e&&(c.current=l(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{m.clearTimeout(i),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else s("ANIMATION_END")},[e,s]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:o.useCallback(i=>{r.current=i?getComputedStyle(i):null,t(i)},[])}}function l(n){return n?.animationName||"none"}function P(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{T as P,h as a,C as u};
